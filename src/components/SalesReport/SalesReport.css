/* Scoped Dark Mode for Sales Report Module Only */

.sales-report-dark-theme {
    /* Define dark theme variables locally */
    --sr-bg-dark: #0f172a;
    --sr-bg-card: #1e293b;
    --sr-text-primary: #f8fafc;
    --sr-text-secondary: #94a3b8;
    --sr-border: #334155;

    background-color: var(--sr-bg-dark);
    color: var(--sr-text-primary);
    min-height: calc(100vh - 100px);
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    transition: background-color 0.3s ease;
}

/* Override standard Bootstrap/Utility classes narrowly within this scope */

.sales-report-dark-theme .card {
    background-color: var(--sr-bg-card);
    border: 1px solid var(--sr-border);
    color: var(--sr-text-primary);
}

.sales-report-dark-theme .text-muted {
    color: var(--sr-text-secondary) !important;
}

.sales-report-dark-theme .text-dark {
    color: #f1f5f9 !important;
    /* Invert text-dark to be light */
}

/* Form Controls in Dark Theme */
.sales-report-dark-theme .form-select,
.sales-report-dark-theme .form-control {
    background-color: var(--sr-bg-card);
    border: 1px solid var(--sr-border);
    color: var(--sr-text-primary);
}

.sales-report-dark-theme .form-select:focus,
.sales-report-dark-theme .form-control:focus {
    border-color: #60a5fa;
    /* Light blue focus */
    box-shadow: 0 0 0 0.2rem rgba(96, 165, 250, 0.25);
    background-color: var(--sr-bg-card);
    /* Ensure it stays dark on focus */
    color: var(--sr-text-primary);
}

/* Scrollbar styling for this dark section if needed */
.sales-report-dark-theme ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

.sales-report-dark-theme ::-webkit-scrollbar-track {
    background: #0f172a;
}

.sales-report-dark-theme ::-webkit-scrollbar-thumb {
    background: #334155;
    border-radius: 4px;
}

.sales-report-dark-theme ::-webkit-scrollbar-thumb:hover {
    background: #475569;
}

/* Print Styles - Triggered by Class via JS or Media Query */

/* 1. Layout Structure (triggered by JS class .printing for Recharts resize) */
.sales-report-dark-theme.printing {
    background-color: white !important;
    color: black !important;
    width: 100vw !important;
    height: auto !important;
    min-height: auto !important;
    max-width: 100vw !important;
    margin: 0 !important;
    padding: 5px !important;
    overflow: visible !important;
    transform: scale(0.65);
    transform-origin: top left;
    width: 153.8% !important;
    /* Inverse of 0.65 to fill width */
}

/* Flex Layout - Respect original structure */
.sales-report-dark-theme.printing>.d-flex.w-100 {
    display: grid !important;
    grid-template-columns: 57fr 43fr !important;
    gap: 10px !important;
    height: 95vh !important;
    width: 100% !important;
    margin-top: 5px !important;
}

/* Preserve Column Structure */
.sales-report-dark-theme.printing>.d-flex.w-100>.d-flex.flex-column {
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    height: 100% !important;
    justify-content: space-between !important;
    overflow: hidden !important;
    /* Ensure content doesn't spill out */
}

/* Preserve Row Structure within Columns */
.sales-report-dark-theme.printing>.d-flex.w-100>.d-flex.flex-column>.d-flex.w-100 {
    display: flex !important;
    flex-direction: row !important;
    /* height/flex is handled by inline styles in JSX (e.g. flex: 57), we just ensure it expands */
    width: 100% !important;
}

/* Card Styling */
.sales-report-dark-theme.printing .card {
    background-color: white !important;
    color: black !important;
    border: 1px solid #ccc !important;
    box-shadow: none !important;
    margin: 0 !important;
    padding: 2px !important;
    overflow: visible !important;
    height: 100% !important;
    width: 100% !important;
    display: flex !important;
    flex-direction: column !important;
}

/* Content Within Cards */
.sales-report-dark-theme.printing .card .flex-grow-1 {
    flex: 1 !important;
    height: 100% !important;
    /* Ensure it fills the flex space for Recharts */
    min-height: 0 !important;
    max-height: 100% !important;
    overflow: visible !important;
    display: block !important;
}

/* Typography Compactness */
.sales-report-dark-theme.printing .text-muted,
.sales-report-dark-theme.printing .text-secondary,
.sales-report-dark-theme.printing .text-dark,
.sales-report-dark-theme.printing span,
.sales-report-dark-theme.printing div,
.sales-report-dark-theme.printing h6 {
    color: black !important;
    text-shadow: none !important;
}

.sales-report-dark-theme.printing h6,
.sales-report-dark-theme.printing .fw-bold {
    font-size: 11px !important;
    margin-bottom: 2px !important;
}

.sales-report-dark-theme.printing .fs-2,
.sales-report-dark-theme.printing .fs-3 {
    font-size: 18px !important;
}

/* Recharts Sizing Force */
.sales-report-dark-theme.printing .recharts-responsive-container {
    height: 100% !important;
    width: 100% !important;
    max-height: 100% !important;
    min-height: 0 !important;
}

/* Compact Typography for Print */
.sales-report-dark-theme.printing .card h6,
.sales-report-dark-theme.printing .card .fw-bold {
    font-size: 10px !important;
    margin-bottom: 2px !important;
}

.sales-report-dark-theme.printing .card .fs-2,
.sales-report-dark-theme.printing .card .fs-3 {
    font-size: 16px !important;
    /* Shrink large numbers */
}

.sales-report-dark-theme.printing .card .fs-5,
.sales-report-dark-theme.printing .card .fs-6 {
    font-size: 12px !important;
}

.sales-report-dark-theme.printing .card .small,
.sales-report-dark-theme.printing .card .text-muted {
    font-size: 8px !important;
}

/* Hide some spacing elements if needed */
.sales-report-dark-theme.printing .card hr {
    margin: 2px 0 !important;
}

/* Remove specific color inline styles */
.sales-report-dark-theme.printing *[style*="#E0E0E0"],
.sales-report-dark-theme.printing *[style*="#f8fafc"] {
    color: black !important;
}

/* Recharts Text (Axis Labels, Legends) */
.sales-report-dark-theme.printing .recharts-text,
.sales-report-dark-theme.printing .recharts-cartesian-axis-tick-value,
.sales-report-dark-theme.printing .recharts-legend-item-text {
    fill: black !important;
    color: black !important;
}

/* Ensure Chart Lines/Grids are visible */
.sales-report-dark-theme.printing .recharts-cartesian-grid-horizontal line,
.sales-report-dark-theme.printing .recharts-cartesian-grid-vertical line {
    stroke: #ccc !important;
}

/* Form Controls (Dropdowns) */
.sales-report-dark-theme.printing .form-select {
    background-color: white !important;
    color: black !important;
    border: 1px solid #ccc !important;
    -webkit-appearance: none;
    appearance: none;
    padding: 0;
    font-weight: bold;
}

/* Fix HR visibility */
hr {
    opacity: 1 !important;
    border-color: #000 !important;
}

/* Layout Adjustments */
.container-fluid {
    width: 100% !important;
    max-width: none !important;
    padding: 0 !important;
}

/* Ensure SVGs have transparent backgrounds */
svg {
    background-color: transparent !important;
}

/* Specific Constraints for Pie Charts in Print to prevent explosion */
.sales-report-dark-theme.printing>.d-flex.w-100>.d-flex.flex-column:nth-child(1)>.d-flex.w-100:nth-child(1)>.card:nth-child(2) .flex-grow-1,
.sales-report-dark-theme.printing>.d-flex.w-100>.d-flex.flex-column:nth-child(1)>.d-flex.w-100:nth-child(2)>.card:nth-child(2) .flex-grow-1 {
    height: 200px !important;
    flex: none !important;
    min-height: 0 !important;
    max-height: 200px !important;
    width: 100% !important;
}

/* 2. Media Print Overrides (Hiding UI elements) */
@media print {

    /* Hide non-printable elements */
    .no-print,
    .d-none-print,
    .sidebar,
    .header,
    .navbar,
    button,
    #sidebar,
    header,
    nav {
        display: none !important;
    }

    /* Page Setup */
    @page {
        size: landscape;
        margin: 5mm;
    }

    /* Ensure .printing styles apply if class is present (it should be) 
       but also apply basics if user uses Ctrl+P directly */
    body {
        background-color: white !important;
        margin: 0 !important;
        padding: 0 !important;
    }
}